(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(t,e,n){"use strict";function i(t,e){var n=document.createElement(t),i=document.createTextNode(e);return n.appendChild(i),n}function s(t,e){var n=document.createElement("p"),i=document.createTextNode(t);return n.classList.add(e),n.appendChild(i),n}function o(t,e,n,i){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"",r=5<arguments.length&&void 0!==arguments[5]&&arguments[5],o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"",a=7<arguments.length?arguments[7]:void 0,c=8<arguments.length?arguments[8]:void 0,d=(9<arguments.length&&arguments[9],10<arguments.length?arguments[10]:void 0),u=11<arguments.length?arguments[11]:void 0;if("submit"!=i&&"hidden"!=i){var h=document.createElement("label"),l=document.createTextNode(e);h.appendChild(l),t.appendChild(h)}var p=document.createElement("input");return p.type=i,p.value=s,p.name=n,p.placeholder=o,r&&(p.required=!0),a&&(p.min=a),c&&(p.max=c),length&&(p.length=length),d&&(p.size=d),u&&(p.pattern=u),t.appendChild(p),p}function r(){var t=document.createElement("div");t.classList.add("dob-input-cont");var e=document.createElement("label"),n=document.createTextNode("Date of Birth");e.appendChild(n);var i=document.createElement("div");o(i,"Day","dob-day","number","",!0,"dd",1,31,2,2,"[0-9]{2}").classList.add("dob-input");var s=document.createElement("div");o(s,"Month","dob-month","number","",!0,"mm",1,12,2,2,"[0-9]{2}").classList.add("dob-input");var r=document.createElement("div");return o(r,"Year","dob-year","number","",!0,"yyyy",1900,2015,4,4,"[0-9]{4}").classList.add("dob-input"),t.appendChild(e),t.appendChild(i),t.appendChild(s),t.appendChild(r),t}function a(t,e,n,i,s){var r=document.createElement("button");r.type=i;var o=document.createTextNode(e);return r.appendChild(o),r.addEventListener("click",function(){t.parentNode.removeChild(t)}),s&&r.classList.add(s),r}function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=(2<arguments.length&&void 0!==arguments[2]&&arguments[2],document.createElement("div"));if(t){var n=document.createElement("label"),s=document.createTextNode(t);n.appendChild(s),i.appendChild(n)}return e.forEach(function(t){var e=null;if("node"===t.type)e=t.content;else if(e=document.createElement("p"),t.innerhtml)e.innerHTML=t.content;else{var n=document.createTextNode(t.content);e.appendChild(n)}i.appendChild(e)}),i}function d(t,e,n,i,s){var r=document.createElement("div");s&&r.classList.add(s);var o=document.createElement("input");o.type="checkbox",o.required=i,o.name=t,o.id=e;var a=document.createElement("label");a.setAttribute("for",e);var c=document.createTextNode(n);return a.appendChild(c),r.appendChild(o),r.appendChild(a),r}n.d(e,"d",function(){return i}),n.d(e,"g",function(){return s}),n.d(e,"f",function(){return o}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return a}),n.d(e,"e",function(){return c}),n.d(e,"b",function(){return d})},10:function(t,e,n){"use strict";function i(t,e,n,i,s,r,o,a,c,d,u,h){this.checkDetailsId=t,this.checkId=e,this.status=n,this.type=i,this.productId=s,this.productName=r,this.createdDate=o,this.qty=a,this.cadetQty=c,this.unitPrice=d,this.r_Points=u,this.taxId=h,this.discountApplied=0,this.voidNotes=null,this.discountNotes=null}i.prototype.createCheckDetailsOnApi=function(i){return new Promise(function(e,n){var t=i.base_url+"checkDetails?key="+i.api+"&checkId="+this.checkId+"&status="+this.status+"&type="+this.type+"&productId="+this.productId+"&productName="+this.productName+"&createdDate="+this.createdDate+"&qty="+this.qty+"&cadetQty="+this.cadetQty+"&unitPrice="+this.unitPrice+"&discountApplied="+this.discountApplied+"&taxId="+this.taxId+"&s_SaleBy=website&r_Points="+this.r_Points;fetch(t,{method:"POST"}).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){e(t)}).catch(function(t){n(t)})}.bind(this))},e.a=i},11:function(t,e,n){"use strict";function i(t,e,n,i,s,r,o,a){this.checkId=t,this.customerId=e,this.type=n,this.status=i,this.name=s,this.total=r,this.notes=o,this.openedDate=a,this.closedDate=null,this.discount=0,this.checkDetails={}}i.prototype.createCheckOnApi=function(i){return new Promise(function(e,n){var t=i.base_url+"checks?key="+i.api+"&customerId="+this.customerId+"&type="+this.type+"&status="+this.status+"&name="+this.name+"&openedDate="+this.openedDate+"&userId=2&total="+this.total+"&discount="+this.discount+"&notes="+this.notes;console.log(t),fetch(t,{method:"POST"}).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){e(t.checkId)}).catch(function(t){n(t)})}.bind(this))},i.prototype.voidCheck=function(i){return new Promise(function(e,n){var t=i.base_url+"checks/"+this.checkId+"/void?key="+i.api;fetch(t,{method:"POST"}).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){e(!0)}).catch(function(t){n(t)})}.bind(this))},e.a=i},12:function(t,e,n){"use strict";var a=n(3);function i(t,e,n,i,s,r,o){var a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null;this.productId=t,this.productType=e,this.description=n,this.price1=i,this.price2=s,this.r_Points=r,this.priceCadet=o,this.wcName=a}i.prototype.getProductById=function(r,o){if(!r)this.productId;return new Promise(function(e,t){var n=new a.a,i=n.retrieve("products");if(i&&i.items[r]&&!n.expired(i.items[r])){var s=i.items[r];return this.productId=s.productId,this.productType=s.productType,this.description=s.description,this.price1=s.price1,this.price2=s.price2,this.r_Points=s.r_Points,this.priceCadet=s.priceCadet,console.log("product fetched from storage"),e(i.items[r])}this.getProductFromApi(o).then(function(t){console.log("from api"),n.store(t.productId,"products",t),e(t)})}.bind(this))},i.prototype.getProductFromApi=function(s){return new Promise(function(n,e){var i=this,t=s.base_url+"products/"+this.productId+"?key="+s.api;fetch(t).then(function(t){return s.checkResponse(t)}).then(function(t){return s.returnJson(t)}).then(function(t){var e=t.products[0];i.productId=e.productId,i.productType=e.productType,i.description=e.description,i.price1=e.price1,i.price2=e.price2,i.r_Points=e.r_Points,i.priceCadet=e.priceCadet,n(e)}).catch(function(t){e(t)})}.bind(this))},e.a=i},13:function(t,e,n){"use strict";var i;function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:40,n=t.getBoundingClientRect().top;window.scroll({top:window.scrollY+n-e,left:0,behavior:"smooth"})}n.d(e,"a",function(){return s}),(i=document.querySelectorAll(".scroll-to"),function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(i)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).forEach(function(n){n.addEventListener("click",function(t){t.preventDefault();var e=n.getAttribute("href").replace("#","");s(document.getElementById(e),0)})})},14:function(t,e,n){"use strict";e.a=function(r,t,o){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"div";return new Promise(function(t,e){if(!document.getElementById(o)){var n=document.createElement(a);n.id=o;var i=r.getBoundingClientRect();n.style.top=i.top+"px",n.style.left=i.left+"px",n.style.width=i.width+"px",n.style.height=i.height+"px";var s=window.getComputedStyle(r).backgroundColor;n.style.backgroundColor=s,schedule.appendChild(n),setTimeout(function(){n.classList.add("full"),setTimeout(function(){t(n)},600)},100)}})}},146:function(t,e,n){var i={"./af":16,"./af.js":16,"./ar":17,"./ar-dz":18,"./ar-dz.js":18,"./ar-kw":19,"./ar-kw.js":19,"./ar-ly":20,"./ar-ly.js":20,"./ar-ma":21,"./ar-ma.js":21,"./ar-sa":22,"./ar-sa.js":22,"./ar-tn":23,"./ar-tn.js":23,"./ar.js":17,"./az":24,"./az.js":24,"./be":25,"./be.js":25,"./bg":26,"./bg.js":26,"./bm":27,"./bm.js":27,"./bn":28,"./bn.js":28,"./bo":29,"./bo.js":29,"./br":30,"./br.js":30,"./bs":31,"./bs.js":31,"./ca":32,"./ca.js":32,"./cs":33,"./cs.js":33,"./cv":34,"./cv.js":34,"./cy":35,"./cy.js":35,"./da":36,"./da.js":36,"./de":37,"./de-at":38,"./de-at.js":38,"./de-ch":39,"./de-ch.js":39,"./de.js":37,"./dv":40,"./dv.js":40,"./el":41,"./el.js":41,"./en-au":42,"./en-au.js":42,"./en-ca":43,"./en-ca.js":43,"./en-gb":44,"./en-gb.js":44,"./en-ie":45,"./en-ie.js":45,"./en-il":46,"./en-il.js":46,"./en-nz":47,"./en-nz.js":47,"./eo":48,"./eo.js":48,"./es":49,"./es-do":50,"./es-do.js":50,"./es-us":51,"./es-us.js":51,"./es.js":49,"./et":52,"./et.js":52,"./eu":53,"./eu.js":53,"./fa":54,"./fa.js":54,"./fi":55,"./fi.js":55,"./fo":56,"./fo.js":56,"./fr":57,"./fr-ca":58,"./fr-ca.js":58,"./fr-ch":59,"./fr-ch.js":59,"./fr.js":57,"./fy":60,"./fy.js":60,"./gd":61,"./gd.js":61,"./gl":62,"./gl.js":62,"./gom-latn":63,"./gom-latn.js":63,"./gu":64,"./gu.js":64,"./he":65,"./he.js":65,"./hi":66,"./hi.js":66,"./hr":67,"./hr.js":67,"./hu":68,"./hu.js":68,"./hy-am":69,"./hy-am.js":69,"./id":70,"./id.js":70,"./is":71,"./is.js":71,"./it":72,"./it.js":72,"./ja":73,"./ja.js":73,"./jv":74,"./jv.js":74,"./ka":75,"./ka.js":75,"./kk":76,"./kk.js":76,"./km":77,"./km.js":77,"./kn":78,"./kn.js":78,"./ko":79,"./ko.js":79,"./ku":80,"./ku.js":80,"./ky":81,"./ky.js":81,"./lb":82,"./lb.js":82,"./lo":83,"./lo.js":83,"./lt":84,"./lt.js":84,"./lv":85,"./lv.js":85,"./me":86,"./me.js":86,"./mi":87,"./mi.js":87,"./mk":88,"./mk.js":88,"./ml":89,"./ml.js":89,"./mn":90,"./mn.js":90,"./mr":91,"./mr.js":91,"./ms":92,"./ms-my":93,"./ms-my.js":93,"./ms.js":92,"./mt":94,"./mt.js":94,"./my":95,"./my.js":95,"./nb":96,"./nb.js":96,"./ne":97,"./ne.js":97,"./nl":98,"./nl-be":99,"./nl-be.js":99,"./nl.js":98,"./nn":100,"./nn.js":100,"./pa-in":101,"./pa-in.js":101,"./pl":102,"./pl.js":102,"./pt":103,"./pt-br":104,"./pt-br.js":104,"./pt.js":103,"./ro":105,"./ro.js":105,"./ru":106,"./ru.js":106,"./sd":107,"./sd.js":107,"./se":108,"./se.js":108,"./si":109,"./si.js":109,"./sk":110,"./sk.js":110,"./sl":111,"./sl.js":111,"./sq":112,"./sq.js":112,"./sr":113,"./sr-cyrl":114,"./sr-cyrl.js":114,"./sr.js":113,"./ss":115,"./ss.js":115,"./sv":116,"./sv.js":116,"./sw":117,"./sw.js":117,"./ta":118,"./ta.js":118,"./te":119,"./te.js":119,"./tet":120,"./tet.js":120,"./tg":121,"./tg.js":121,"./th":122,"./th.js":122,"./tl-ph":123,"./tl-ph.js":123,"./tlh":124,"./tlh.js":124,"./tr":125,"./tr.js":125,"./tzl":126,"./tzl.js":126,"./tzm":127,"./tzm-latn":128,"./tzm-latn.js":128,"./tzm.js":127,"./ug-cn":129,"./ug-cn.js":129,"./uk":130,"./uk.js":130,"./ur":131,"./ur.js":131,"./uz":132,"./uz-latn":133,"./uz-latn.js":133,"./uz.js":132,"./vi":134,"./vi.js":134,"./x-pseudo":135,"./x-pseudo.js":135,"./yo":136,"./yo.js":136,"./zh-cn":137,"./zh-cn.js":137,"./zh-hk":138,"./zh-hk.js":138,"./zh-tw":139,"./zh-tw.js":139};function s(t){var e=r(t);return n(e)}function r(t){var e=i[t];if(e+1)return e;var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}s.keys=function(){return Object.keys(i)},s.resolve=r,(t.exports=s).id=146},15:function(t,e,n){"use strict";var E=n(1),s=n(4);function p(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","path"),n=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttributeNS(null,"viewBox","0 0 32 32"),e.setAttributeNS(null,"d","m 12.926,13.569 c 0,-0.961 -0.779,-1.74 -1.74,-1.74 -0.96,0 -1.74,0.779 -1.74,1.74 0,0.96 0.779,1.739 1.74,1.739 0.961,10e-4 1.74,-0.778 1.74,-1.739 l 0,0 z"),n.setAttributeNS(null,"d","M 26.977,9.864 C 24.027,3.194 16.228,0.178 9.558,3.128 5.838,4.774 3.083,8.042 2.092,11.987 c 0.112,3.613 0.827,7.182 2.116,10.56 7.119,3.92 14.919,6.449 22.984,7.453 1.027,-1.952 1.775,-4.037 2.225,-6.196 -4.256,-0.492 -8.484,-1.198 -12.669,-2.116 -1.827,-0.401 -3.483,-1.361 -4.74,-2.747 L 8.965,15.584 C 8.151,14.686 7.957,13.386 8.474,12.29 c 0.707,-1.499 2.494,-2.141 3.993,-1.434 l 3.077,1.451 c 0.387,0.183 0.809,0.28 1.236,0.286 4.02,0.058 8.038,-0.19 12.02,-0.74 1.178,3.703 1.422,7.639 0.713,11.459 -0.331,-0.039 -0.663,-0.078 -0.994,-0.119 0.846,-4.497 0.309,-9.144 -1.542,-13.329 z"),t.appendChild(e),t.appendChild(n),t}var u=n(2);n(8);function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e,n,i,s,r,o,a,c,d,u){this.targetEl=t,this.autoLoadForm=e,this.isFamilyEvent=n,this.bookingQty=i,this.qtyCadets=s,this.qtyInduction=r,this.price=o,this.regularPrice=a,this.onSale=c,this.inductionPrice=d,this.partyInfo=u}i.prototype.addFormElements=function(t,e,n,i,s,r,o,a,c,d,u,h){var l=this.calculateOrderTotal(),p=s.format("dddd, MMMM Do YYYY"),m=s.format("H:mm");t.appendChild(Object(E.a)(t,"<< back","back","button","text-button")),t.appendChild(Object(E.d)("h2",i));var v=Object(E.e)(null,[{content:p},{content:m}]);v.classList.add("date-info"),t.appendChild(v);var f="";if(this.autoLoadForm){console.log("Is autoload form"),f="input";var y=document.createElement("div");y.classList.add("quantities"),this.displayQuantities(t,y,c,this.bookingQty,this.qtyCadets,this.qtyInduction,this.partyInfo,f),t.appendChild(y)}else{f="infoBlock";var b=document.createElement("div");b.classList.add("quantities"),this.displayQuantities(t,b,c,this.bookingQty,this.qtyCadets,this.qtyInduction,this.partyInfo,f),t.appendChild(b)}this.showInductions(),t.appendChild(this.drawOrderTotal()),t.appendChild(Object(E.d)("h4","Please enter your details"));var j=Object(E.f)(t,"Full name","name","text","",!0,"full name"),g=Object(E.f)(t,"Your E-mail","email","email","",!0,"e-mail"),I=Object(E.c)();t.appendChild(I);Object(E.f)(t,"Phone number","telephone","text","",!0,"phone number");var k=Object(E.b)("consent","consent-input","We require your e-mail address to manage your reservation in our booking system. We may send you a courtesy email to check that you were able to book successfully. Please tick this box if you are happy to proceed.",!0,"consent-cont");t.appendChild(k),d&&(0<d.name.length&&" "!==d.name&&(j.value=d.name),d.email&&(g.value=d.email)),Object(E.f)(t,"WC Product ID","wc-product-id","hidden",a),this.subTotalInput=Object(E.f)(t,"Subtotal","subtotal","hidden",l),Object(E.f)(t,"Event ID","event-id","hidden",e),Object(E.f)(t,"Event Reservation ID","event-reservation-id","hidden",n),Object(E.f)(t,"Product ID","product-id","hidden",o),Object(E.f)(t,"Start","start","hidden",s.clone().format("YYYY-MM-DD HH:mm:ss")),this.bookingQtyInput=Object(E.f)(t,"Qty","qty","hidden",parseInt(this.bookingQty,10)),this.qtyCadetsInput=Object(E.f)(t,"Qty. Cadets","qty-cadets","hidden",parseInt(this.qtyCadets,10)),this.qtyInductionInput=Object(E.f)(t,"Qty. Inductions","qty-induction","hidden",parseInt(this.qtyInduction,10)),Object(E.f)(t,"","submitButton","submit","Make Reservation");var C=Object(E.a)(t,"go back","cancel","button","close");t.appendChild(C)},i.prototype.showInductions=function(){if(document.getElementsByClassName("induction-select").length<1){var t=document.createElement("div");t.classList.add("induction-select"),t.appendChild(Object(E.d)("h4","Please choose an induction time"));var e=document.createElement("div");e.classList.add("induction-times"),t.appendChild(e),this.targetEl.appendChild(t),Object(u.a)(e),this.qtyInduction<1&&(t.style.display="none")}},i.prototype.displayQuantities=function(t,e,n,i){var s=1===n||3===n?"Total Racers":"Total Participants",r=0<this.partyInfo.guests?this.partyInfo.guests+this.partyInfo.extra_guests:this.bookingQty;if(this.autoLoadForm){t.appendChild(Object(E.d)("h4","How many people will be taking part?"));var o=document.createElement("div");Object(E.f)(o,"Drivers aged 14+","quantity-adults","number",0,!1,"",0,35,2,2,"[0-9]{2}").addEventListener("change",this.onQuantityChange.bind(this)),e.appendChild(o);var a=document.createElement("div");Object(E.f)(a,"Drivers aged 8-13","quantity-cadets","number",0,!1,"",0,35,2,2,"[0-9]{2}").addEventListener("change",this.onQuantityChange.bind(this)),e.appendChild(a);var c=document.createElement("div"),d=Object(E.f)(c,"Number of inductions","quantity-inductions","number",0,!1,"",0,35,2,2,"[0-9]{2}");e.appendChild(c),this.inductionsInput=d}else{var u=Object(E.e)(s,[{type:"node",content:p()},{content:" x"+r}]);if(e.appendChild(u),0<qtyCadets){var h=Object(E.e)("(14+)",[{type:"node",content:p()},{content:" x"+(this.bookingQty-this.qtyCadets)}]);e.appendChild(h);var l=Object(E.e)("(8-13)",[{type:"node",content:p()},{content:" x"+this.qtyCadets}]);e.appendChild(l)}}},i.prototype.addInductionTime=function(t,e,n,i){var s=t.format("YYYY-MM-DDTHH:mm:ss"),r=t.format("H:mm dddd, Do MMMM YYYY"),o=document.getElementsByClassName("induction-times")[0];o.classList.contains("loading")&&Object(u.b)(o);var a=document.createElement("input");a.type="radio",a.name="induction-time",a.id="induction-time-"+e,a.value=s,a.required=!0,n&&a.setAttribute("data-event-reservation",n),i&&a.setAttribute("data-event-id",i);var c=document.createElement("label"),d=document.createTextNode(r);c.setAttribute("for","induction-time-"+e),c.appendChild(d),o.appendChild(a),o.appendChild(c)},i.prototype.noInductionsAvailable=function(){var t=document.getElementsByClassName("induction-times")[0];t.classList.add("no-availability"),Object(u.b)(t);var e=Object(E.d)("h3","No inductions available"),n=document.createElement("p");n.innerHTML='Sorry, there are no induction slots available on this date. Please call us on <a href="tel:01915214050">0191 521 4050</a> to see when we can accommodate you.',t.appendChild(e),t.appendChild(n),r(document.getElementById("reservation_form").children).forEach(function(t){"INPUT"===t.tagName&&(t.disabled=!0)}),r(document.getElementsByClassName("dob-input")).forEach(function(t){t.disabled=!0});var i=document.getElementsByName("submitButton")[0];i.parentNode.removeChild(i)},i.prototype.onQuantityChange=function(t){var e=parseInt(document.getElementsByName("quantity-adults")[0].value,10),n=parseInt(document.getElementsByName("quantity-cadets")[0].value,10),i=parseInt(document.getElementsByName("quantity-inductions")[0].value,10);this.qtyCadets=n,this.qtyInduction=i,this.bookingQty=n+e,this.subTotalInput.value=this.calculateOrderTotal(),this.bookingQtyInput.value=this.bookingQty,this.qtyCadetsInput.value=this.qtyCadets,this.qtyInductionInput.value=this.qtyInduction;var s=document.getElementsByClassName("subtotal-area")[0];s.parentNode.replaceChild(this.drawOrderTotal(),s)},i.prototype.calculateOrderTotal=function(){var t=parseFloat(this.price,10)*parseInt(this.bookingQty,10);return 0<this.qtyInduction&&(t+=parseFloat(this.inductionPrice,10)*parseInt(this.qtyInduction,10)),0<this.partyInfo.extra_guests&&(t+=this.partyInfo.extra_guest_price*this.partyInfo.extra_guests),t},i.prototype.drawOrderTotal=function(){var t=Object(E.e)("Sub-Total",[{content:this.orderTotalContent(),innerhtml:!0}]);return t.classList.add("subtotal-area"),this.subTotalEl=t},i.prototype.orderTotalContent=function(){var t=this.calculateOrderTotal(),e="";this.onSale&&this.regularPrice&&(e="<strike>"+Object(s.a)(parseFloat(this.regularPrice,10),"£")+"</strike>");var n=0<this.qtyInduction?", plus "+this.qtyInduction+"x "+Object(s.a)(parseFloat(this.inductionPrice,10),"£")+" for inductions":"",i=Object(s.a)(t,"£")+" ("+this.bookingQty+"x "+e+Object(s.a)(parseFloat(this.price,10),"£")+" per person"+n+")";return 0<this.partyInfo.guests&&(i=Object(s.a)(t,"£")+" (includes "+this.partyInfo.extra_guests+"x extra guests at "+Object(s.a)(this.partyInfo.extra_guest_price,"£")+" per guest.)"),i};e.a=i},2:function(t,e,n){"use strict";function i(t){t.classList.add("loading");var e=document.createElement("div");e.classList.add("lds-ring");for(var n=0;n<3;n++){var i=document.createElement("div");e.appendChild(i)}t.appendChild(e)}function s(t){t.removeChild(t.firstChild),t.classList.remove("loading")}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},3:function(t,e,n){"use strict";var i=n(0),s=n.n(i);function r(){this.storage=window.localStorage,this.expire=24}r.prototype.retrieve=function(t){var e=JSON.parse(this.storage.getItem(t));return void 0!==e&&e},r.prototype.store=function(t,e,n){var i=JSON.parse(this.storage.getItem(e));i||(i={items:{}}),n.updated=s()().format(),i.items[t]=n,this.storage.setItem(e,JSON.stringify(i))},r.prototype.expired=function(t){var e=s()(t.updated).add(this.expire,"h");return s()()>e},r.prototype.echo=function(){for(var t={},e=Object.keys(this.storage),n=0;n<e.length;n++){var i=e[n];try{t[i]=JSON.parse(this.storage.getItem(i),!1)}catch(t){}}console.log(t)},e.a=r},4:function(t,e,n){"use strict";function i(t){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")+t.toFixed(2)}n.d(e,"a",function(){return i})},5:function(t,e,n){"use strict";function i(){this.base_url="https://knesunderland.clubspeedtiming.com/api/index.php/",this.api="LDai18udl09uFs26Miv1",this.limit=200}i.prototype.checkResponse=function(t){return t.ok?Promise.resolve(t):Promise.reject(new Error(t.statusText))},i.prototype.returnJson=function(t){return t.json()},e.a=i},6:function(t,e,n){"use strict";var i=n(0),s=n.n(i);function r(t,e,n,i,s,r,o,a,c,d,u,h,l,p,m,v){this.eventReservationId=t,this.description=e,this.endTime=n,this.eventTypeId=i,this.minNoOfAdultsPerBooking=s,this.minNoOfCadetsPerBooking=r,this.noOfCadetRacers=o,this.noOfRacers=a,this.noOfTotalRacers=c,this.notes=d,this.startTime=u,this.status=h,this.subject=l,this.typeId=m,this.hidden=v,this.event={},this.checks={},this.userId=2,this.externalSystemId=p}r.prototype.getCurrentParticipants=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=0;if(void 0!==this.checks)for(var e=Object.keys(this.checks),n=0;n<e.length;n++){var i=e[n];if(this.checks[i]&&this.checks[i].checkDetails)for(var s=Object.keys(this.checks[i].checkDetails),r=0;r<s.length;r++){var o=s[r],a=this.checks[i].checkDetails[o];if(2!==a.status){var c=a.r_Points,d=a.qty;t+=c?parseInt(c,10)*parseInt(d,10):0,t+=parseInt(a.cadetQty,10)}}}return this.participants=t,this.participants},r.prototype.createEventReservationOnApi=function(i){return new Promise(function(e,n){s()(this.eventScheduledTime),s()(this.eventScheduledTime).add(parseInt(this.eventDuration,10),"m");var t=i.base_url+"eventreservations?key="+i.api+"&allowOnlineReservation=true&description="+this.description+"&endTime="+this.endTime+"&eventTypeId="+this.eventTypeId+"&isEventClosure=false&minNoOfAdultsPerBooking=0&minNoOfCadetsPerBooking=0&noOfRacers="+this.noOfRacers+"&noOfCadetRacers="+this.noOfCadetRacers+"&noOfTotalRacers="+this.noOfTotalRacers+"&notes=Online booking"+this.subject+"&ptsPerReservation=1&repId=3&startTime="+this.startTime+"&status=2&subject="+this.subject+"&typeId="+this.typeId+"&userId="+this.userId+"&externalSystemId=KNE Website online booking system";fetch(t,{method:"POST"}).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){e(t)}).catch(function(t){n(t)})}.bind(this))},r.prototype.setId=function(i,s){return new Promise(function(e,t){var n=this;i?(this.eventReservationId=i,e(i)):this.createEventReservationOnApi(s).then(function(t){n.eventReservationId=t,e(t)})}.bind(this))},r.prototype.getChecks=function(i){return new Promise(function(e,n){this.getEventReservationLinks(i).then(function(t){var e=[];t.forEach(function(t){e.push(t.checkId)});var n=i.base_url+"checks?key="+i.api+'&where={"checkId":{"in":['+e+"]}}";return fetch(n)}).then(function(t){return i.checkResponse(t)}).then(function(t){return i.returnJson(t)}).then(function(t){e(t)}).catch(function(t){n(t)})}.bind(this))},r.prototype.getEventReservationLinks=function(i){return new Promise(function(e,n){var t=i.base_url+"eventReservationLinks?key="+i.api+'&where={"reservationId":'+this.eventReservationId+"}";fetch(t).then(function(t){return i.checkResponse(t)}).then(function(t){return i.returnJson(t)}).then(function(t){e(t)}).catch(function(t){n(t)})}.bind(this))},r.prototype.setStatus=function(i,s){return new Promise(function(e,t){console.info("setting event status to "+i),this.status=i;var n=s.base_url+"eventreservations/"+this.eventReservationId+"?key="+s.api+"&status="+i;fetch(n,{method:"PUT",cors:"cors"}).then(function(t){console.log(t),e(t)})}.bind(this))},r.prototype.removeCheck=function(t,i){return console.info("Removing check "+t+"..."),new Promise(function(n,e){this.checks[t]&&delete this.checks[t],this.getChecks(i).then(function(t){var e=0;t.checks.forEach(function(t){0==t.status&&e++}),n(e)}).catch(function(t){e(t)})}.bind(this))},e.a=r},7:function(t,e,n){"use strict";var i=n(0),o=n.n(i);n(15),n(14);function s(t,e,n,i,s,r,o,a,c){this.eventId=n,this.eventDesc=t,this.eventDuration=e,this.eventScheduledTime=i,this.eventTypeId=s,this.eventTypeName=r,this.reservationId=o,this.trackNo=a,this.eventHeatTypes=c,this.eventRoundsIds=[]}s.prototype.getEventIds=function(i){return new Promise(function(e,t){var n=this;this.eventId&&this.reservationId?e({eventId:this.eventId,eventReservationId:this.eventReservationId}):EventReservation.createEventReservationOnApi(i).then(function(t){return n.reservationId=t,n.createEventOnApi(i)}).then(function(t){n.eventId=t,e({eventId:n.eventId,eventReservationId:n.reservationId})})}.bind(this))},s.prototype.createEventOnApi=function(r){return new Promise(function(e,n){var i=this,t=o()(this.eventScheduledTime),s=(o()(this.eventScheduledTime).add(parseInt(this.eventDuration,10),"m"),r.base_url+"events?key="+r.api+"&eventDesc=TEST EVENT Online&eventDuration="+this.eventDuration+"&eventNotes=This is an online test event form Surge.&eventScheduledTime="+t.clone().format("YYYY-MM-DDTHH:mm:ss")+"&eventTheme=-16776961&eventTypeId="+this.eventTypeId+"&eventTypeName="+this.eventTypeName+"&reservationId="+this.reservationId+"&totalRacers=0&trackNo="+this.trackNo);fetch(s,{method:"POST"}).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){return i.eventId=t,i.createEventRoundsOnApi(t,r)}).then(function(t){i.eventRoundsIds=t,e(i.eventId)}).catch(function(t){n(t)})}.bind(this))},s.prototype.createEventRoundsOnApi=function(s,r){return new Promise(function(n,t){var i=[];this.eventHeatTypes?this.eventHeatTypes.forEach(function(t){var e=r.base_url+"eventRounds?key="+r.api+"&eventId="+s+"&cadetsPerHeat="+t.cadetsPerHeat+"&heatDescription="+t.description+"&heatsPerRacer="+t.heatsPerRacer+"&heatTypeId="+t.heatTypeId+"&racersPerHeat="+t.racersPerHeat+"&roundNumber="+t.roundNumber+"&roundWinBy="+t.roundWinBy+"&proceedValue="+t.proceedValue+"&proceedMethod="+t.proceedMethod+"&lineUpType="+t.lineUpType;fetch(e,{method:"POST"}).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){i.push(t)}).catch(function(t){console.log(t)}),n(i)}):n(null)}.bind(this))},s.prototype.setId=function(i,s){return new Promise(function(e,t){var n=this;i?(this.eventId=i,e(i)):this.createEventOnApi(s).then(function(t){n.eventId=t,e(t)})}.bind(this))},s.prototype.removeEventOnApi=function(i){return new Promise(function(e,n){console.info("Deleting Event "+this.eventId);var t=i.base_url+"events/"+this.eventId+"?key="+i.api;fetch(t,{method:"DELETE"}).then(function(t){return i.checkResponse(t)}).then(function(t){e(!0)}).catch(function(t){n(t)})}.bind(this))},e.a=s},8:function(t,e,n){"use strict";var i=n(3),a=n(1),s=n(0),c=n.n(s),d=n(2);function r(t,e,n,i,s,r,o,a,c,d,u,h,l){this.reservationId=t,this.wcProductId=e,this.created=n,this.eventTypeId=i,this.check=s,this.checkDetails=r,this.customer=o,this.event=a,this.eventReservation=c,this.eventReservationLink=d,this.status=u,this.wcEventTitle=h,this.induction=l}r.prototype.setStatusCancelled=function(){this.status="cancelled";var t=new i.a;return t.retrieve("reservations").items[this.reservationId].status="cancelled",t.store(this.reservationId,"reservations",this),!0},r.prototype.displaySummary=function(t){console.log(this);var e=this.induction?this.wcEventTitle+" + Inductions":this.wcEventTitle;t.appendChild(Object(a.d)("h2",e));var n=c()(this.eventReservation.startTime),i=n.format("dddd, Do MMMM YYYY"),s=n.format("H:mm");this.induction&&(s+=" (Inductions at "+c()(this.induction.startTime).format("H:mm")+")");var r=Object(a.g)(i,"reservation-date"),o=Object(a.g)(s,"reservation-time");t.appendChild(r),t.appendChild(o),Object(d.b)(t)},e.a=r},9:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(2);function i(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=null;return document.getElementsByClassName("overlay").length<1?((s=document.createElement("div")).classList.add("overlay"),document.body.appendChild(s)):s=document.getElementsByClassName("overlay")[0],t&&s.classList.add("sub"),e&&Object(r.a)(s),n&&s.appendChild(n),i&&Object(r.b)(s),s}}}]);
//# sourceMappingURL=booking~index.js.map